function calcHeight(){var e=$(".more-badges a");$.each(e,function(){var e=$(this).parent().parent().find("li:first-child img").height();$(this).height(e).css("line-height",e+"px")})}(function(e){e.fn.reportCard=function(t){function r(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function i(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"];return t[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}function s(){var t=e(".badges img"),n=t.length,r=0;t.one("load",function(){r++;r===n&&calcHeight()}).each(function(){if(this.complete){e(this).trigger("load");calcHeight()}})}function o(){e(".progress div, .badges img, .more-badges a").tooltip()}function u(){e.each(e(".report-card.treehouse"),function(){var t=e(this).width();if(t>899){e(this).find(".more-badges").css("font-size","45px");e(this).find("h1").css({"font-size":"3em","line-height":"1.2em"})}else if(t>579){e(this).find(".more-badges").css("font-size","30px");e(this).find("h1").css({"font-size":"2em","line-height":"1.2em"})}else if(t<500){e(this).find(".more-badges").css("font-size","20px");e(this).find("h1").css({"font-size":"20px","line-height":"25px"})}else t<261&&e(this).find(".more-badges").css({width:"9%","font-size":"15px"});t>300?e(this).find(".more-badges").show():e(this).find(".more-badges").hide()})}function a(t){function c(e){var t=[],n=e.length,r=l.badgesAmount,s="<p>Some of the last few courses I've taken were on ";t+='<ul class="badges">';for(var o=0;o<r;o++){var u=new Date(e[o].earned_date),f=i(u);o<r-1?t+='<li style="width: '+(90/r*100/100).toFixed(2)+'%"><a href="'+e[o].url+'" title="I earned the '+e[o].name+" badge on "+f+'" target="_blank"><img class="treebadge" src="'+e[o].icon_url+'" alt="'+e[o].name+'" title="I earned the \''+e[o].name+"' badge on "+f+'"/></a></li>':t+='<li style="width: '+(90/r*100/100).toFixed(2)+'%" class="more-badges"><a href="http://teamtreehouse.com/'+a+'" target="_blank" title="Check out the other '+(n-r+1)+' badges at Treehouse!" >+'+(n-r+1)+"</a></li>";o<3?s+="<strong>"+e[o].name+"</strong>"+", ":o<4&&(s+=" and <strong>"+e[o].name+"</strong>!</p>")}t+="</ul>";return t+s}function h(t){var n=c(t),r=0,i=0;e.each(t,function(e){var n=Date.parse(t[e].earned_date),s=Date.parse(new Date);n>s-2628e6&&(r+=1);n>s-315569e5&&(r=i+1)});e(".report-card.treehouse").append(n)}var a=t.userName,f="http://teamtreehouse.com/"+t.userName+".json";e.ajax({type:"GET",url:f,datatype:"json",async:!0,cache:!1,beforeSend:function(){e(".report-card.treehouse").parent().prepend(n);e(".report-card.treehouse").hide()},success:function(t){var n=typeof t=="string"?JSON.parse(t):t;e(".report-card.treehouse").append("<h1>I have passed "+n.badges.length+" lessons and scored "+r(n.points.total)+" points at Treehouse!</h1><p>Check out some of my last passed course content at the badges below: </p>");h(n.badges.reverse())},error:function(){},complete:function(){e(".report-card.treehouse").prev().remove();e(".report-card.treehouse").fadeIn(1e3);o();s();u()}})}function f(t){function v(t){var n="",r=t.length>2?93:10,i=(r/t.length).toFixed(2);n+='<ul class="badges codeschool">';e.each(t,function(e){var r=t[e].title;n+='<li style="width:'+i+'%;">';n+='<a href="'+t[e].url+'" title="'+r+'" target="_blank">';n+='<img src="'+t[e].badge+'" title="'+r+'" alt="'+r+'" />';n+="</a>";n+="</li>"});n+="</ul>";return n}function m(t){e.each(t,function(e){var n=t[e].title;switch(n){case"Discover DevTools":h+=1;p+=1;break;case"jQuery Air: Captain's Log":u+=1;p+=1;break;case"Anatomy of Backbone.js":u+=1;p+=1;break;case"Git Real":a+=1;p+=1;break;case"Try jQuery":u+=1;p+=1;break;case"Assembling Sass":c+=1;p+=1;break;case"Real-time Web with Node.js":u+=1;p+=1;break;case"Rails Testing for Zombies":f+=1;p+=1;break;case"CSS Cross-Country":c+=1;p+=1;break;case"CoffeeScript":u+=1;p+=1;break;case"Rails for Zombies 2":f+=1;p+=1;break;case"Functional HTML5 & CSS3":c+=1;l+=1;p+=1;break;case"jQuery Air: First Flight":u+=1;p+=1;break;case"Try Git":a+=1;p+=1;break;case"Rails for Zombies Redux":f+=1;p+=1;break;case"Try Ruby":f+=1;p+=1}})}function g(t){var n=t.courses.completed,i=t.courses.in_progress,s=v(n),g=v(i);m(n);m(i);d.javascript=u;d.ruby=f;d.html=l;d.css=c;d.dev=h;d.git=a;d.total=p;var y=t.user.total_score;o=y.replace("<b>","").replace("</b>","").replace("Total Points","");e(".report-card.codeschool").append("<h5>I've completed "+n.length+" courses, earned "+t.badges.length+" badges, and scored "+r(o)+" points at CodeSchool!</h5>");e(".report-card.codeschool").append(s);e(".report-card.codeschool").append("<hr><p>I am also currently enrolled in "+i.length+" additional courses, including: <p>");e(".report-card.codeschool").append(g);e(".report-card.codeschool img, .report-card.codeschool img").tooltip()}var i=t.userName,s="https://www.codeschool.com/users/"+i+".json",o=0,u=0,a=0,f=0,l=0,c=0,h=0,p=0,d={};e.ajax({type:"GET",url:s,dataType:"jsonp",cache:!1,beforeSend:function(){e(".report-card.codeschool").parent().prepend(n);e(".report-card.codeschool").hide()},success:function(t){g(t);e(".CodeSchool-chart div").tooltip()},error:function(){console.log("error...")},complete:function(){e(".report-card.codeschool").prev().remove();e(".report-card.codeschool").fadeIn(1e3)}})}var n='<div class="loadinggif"><p style="text-align:center;">Loading Report Card...</p><div class="spinftw"></div></div>',l=e.extend({userName:"rileyhilliard",site:"treehouse",badgesAmount:6},t);l.site==="treehouse"?a(l):l.site==="codeschool"&&f(l);e(window).resize(function(){calcHeight();u()})}})(jQuery);$(window).resize(function(){calcHeight()});